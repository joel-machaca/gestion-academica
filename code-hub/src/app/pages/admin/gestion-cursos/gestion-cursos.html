<main class="flex-1 p-8">
    <div class="flex flex-col gap-6">
        <!-- PageHeading -->
        <div class="flex flex-wrap justify-between gap-4 items-center">
            <div class="flex flex-col gap-1">
                <p class="text-gray-900 dark: text-3xl font-black leading-tight tracking-tight">Gesti贸n
                    de Cursos</p>
                <p class="text-gray-900 dark:text-subtle-dark text-base font-normal leading-normal">Administra, crea
                    y edita los cursos de la plataforma.</p>
            </div>
            <button
                class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-red-700 text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-red-700/90 transition-colors">
                <span class="material-symbols-outlined mr-2 text-xl!">add</span>
                <a routerLink="crear-curso" class="truncate">Crear Curso</a>
            </button>
        </div>
        <!-- Filters: SearchBar and Chips -->
        <div class="flex flex-wrap items-center gap-4">
            <div [formGroup]="filtros" class="grow min-w-72">
  <label class="flex flex-col h-12 w-full">
    <div class="flex w-full flex-1 items-stretch rounded-lg h-full">
      <div
        class="text-gray-900 dark:text-subtle-dark flex bg-white border border-gray-200 dark:border-border-dark items-center justify-center pl-4 rounded-l-lg border-r-0">
        <span class="material-symbols-outlined">search</span>
      </div>
      <input
        formControlName="nombre"
        class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-gray-900 dark: placeholder:text-subtle-dark px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal"
        placeholder="Buscar por nombre de curso..." />
    </div>
  </label>
</div>
        </div>
        <!-- Table -->
        <div class="@container">
            <div
                class="overflow-hidden rounded-lg border border-gray-200 dark:border-border-dark bg-white ">
                <table class="w-full">
                    <thead class="bg-gray-100">
                        <tr>
                            <th
                                class="px-4 py-3 text-left text-gray-900 dark:text-subtle-dark w-1/3 text-xs font-bold uppercase tracking-wider">
                                Nombre del Curso</th>
                            <th
                                class="px-4 py-3 text-left text-gray-900 dark:text-subtle-dark w-1/4 text-xs font-bold uppercase tracking-wider">
                                Profesor Asignado</th>
                            <th
                                class="px-4 py-3 text-left text-gray-900 dark:text-subtle-dark w-1/6 text-xs font-bold uppercase tracking-wider">
                                Fecha de Inicio</th>
                            <th
                                class="px-4 py-3 text-left text-gray-900 dark:text-subtle-dark w-1/6 text-xs font-bold uppercase tracking-wider">
                                Estado</th>
                            <th
                                class="px-4 py-3 text-left text-gray-900 dark:text-subtle-dark w-auto text-xs font-bold uppercase tracking-wider">
                                Acciones</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-border-dark">
                        @for (curso of cursosFiltrados; track curso.id) {
                            <tr>
                            <td class="h-[72px] px-4 py-2 text-sm font-medium text-gray-900 dark:">
                                {{curso.nombre}}</td>
                            <td class="h-[72px] px-4 py-2 text-sm text-gray-900 dark:text-subtle-dark">{{getNombreProfesor(curso.profesorId)}}
                            </td>
                            <td class="h-[72px] px-4 py-2 text-sm text-gray-900 dark:text-subtle-dark">{{ curso.fechaInicio | FormatoFecha }}
                            </td>
                            <td class="h-[72px] px-4 py-2">
                                <span
                                    class="inline-flex items-center rounded-full bg-green-100 dark:bg-green-900/50 px-3 py-1 text-xs font-semibold text-green-800 dark:text-green-300"
                                    [ngClass]="curso.estado === 'activo' ? 'bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300' : 'bg-gray-100 text-gray-800 dark:bg-gray-700/50 dark:text-gray-300'"
                                    >{{ curso.estado === 'activo' ? 'Activo' : 'Inactivo' }}</span>
                            </td>
                            <td class="h-[72px] px-4 py-2 text-sm font-bold">
                                <button
                                    aria-label="Editar curso"
                                    (click)="abrirModal(curso)"
                                    class="p-2 rounded-full hover:bg-red-700/10 text-gray-900 dark:text-subtle-dark hover:text-primary dark:hover:text-primary transition-colors">
                                    
                                    <span class="material-symbols-outlined text-xl!">edit</span>
                                </button>
                            </td>
                        </tr>

                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>



<!-- Modal de edici贸n -->
<div *ngIf="mostrarModal" class="fixed inset-0 flex items-center justify-center bg-black/50 z-50">
  <div class="bg-white dark:bg-background-dark rounded-lg w-96 p-6">
    <h2 class="text-xl font-bold mb-4">Editar Curso</h2>

    <form [formGroup]="formEditarCurso" (ngSubmit)="guardarCambios()" class="space-y-4">
      <!-- Nombre -->
      <input formControlName="nombre" placeholder="Nombre del curso"
             class="w-full p-2 border rounded" />

      <!-- Descripci贸n -->
      <textarea formControlName="descripcion" placeholder="Descripci贸n"
                class="w-full p-2 border rounded"></textarea>

      <!-- Fecha de inicio -->
      <input formControlName="fechaInicio" type="date" class="w-full p-2 border rounded" />

      <!-- Profesor asignado -->
      <select formControlName="profesorId" class="w-full p-2 border rounded">
        <option *ngFor="let id of profesoresIds" [value]="+id">{{ profesores[+id] }}</option>
      </select>

      <!-- Estado -->
      <select formControlName="estado" class="w-full p-2 border rounded">
        <option value="activo">Activo</option>
        <option value="inactivo">Inactivo</option>
      </select>

      <!-- Botones -->
      <div class="flex justify-end gap-2 mt-4">
        <button type="button" (click)="cerrarModal()"
                class="px-4 py-2 rounded bg-gray-300">Cancelar</button>
        <button type="submit" class="px-4 py-2 rounded bg-red-700 text-white">Guardar</button>
      </div>
    </form>
  </div>
</div>